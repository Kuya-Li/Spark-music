(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9428"],{"31d8":function(e,s,i){"use strict";i.r(s);var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_edit page_music_evaluation",attrs:{id:"music_evaluation_edit"}},[s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row diy_edit_content_box"},[e.$check_field("set","song_title")||e.$check_field("add","song_title")||e.$check_field("get","song_title")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(0),s("div",{staticClass:"diy_field diy_text"},[e.form["song_title"]&&e.$check_field("set","song_title")||!e.form["song_title"]&&e.$check_field("add","song_title")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["song_title"],expression:"form['song_title']"}],attrs:{type:"text",id:"form_song_title",placeholder:"请输入歌曲名称",disabled:e.disabledObj["song_title_isDisabled"]},domProps:{value:e.form["song_title"]},on:{input:function(s){s.target.composing||e.$set(e.form,"song_title",s.target.value)}}}):e.$check_field("get","song_title")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","music_genre")||e.$check_field("add","music_genre")||e.$check_field("get","music_genre")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(1),s("div",{staticClass:"diy_field diy_text"},[e.form["music_genre"]&&e.$check_field("set","music_genre")||!e.form["music_genre"]&&e.$check_field("add","music_genre")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["music_genre"],expression:"form['music_genre']"}],attrs:{type:"text",id:"form_music_genre",placeholder:"请输入音乐类型",disabled:e.disabledObj["music_genre_isDisabled"]},domProps:{value:e.form["music_genre"]},on:{input:function(s){s.target.composing||e.$set(e.form,"music_genre",s.target.value)}}}):e.$check_field("get","music_genre")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","singer_name")||e.$check_field("add","singer_name")||e.$check_field("get","singer_name")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(2),s("div",{staticClass:"diy_field diy_text"},[e.form["singer_name"]&&e.$check_field("set","singer_name")||!e.form["singer_name"]&&e.$check_field("add","singer_name")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["singer_name"],expression:"form['singer_name']"}],attrs:{type:"text",id:"form_singer_name",placeholder:"请输入歌手姓名",disabled:e.disabledObj["singer_name_isDisabled"]},domProps:{value:e.form["singer_name"]},on:{input:function(s){s.target.composing||e.$set(e.form,"singer_name",s.target.value)}}}):e.$check_field("get","singer_name")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","release_time")||e.$check_field("add","release_time")||e.$check_field("get","release_time")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(3),s("div",{staticClass:"diy_field diy_date"},[e.form["release_time"]&&e.$check_field("set","release_time")||!e.form["release_time"]&&e.$check_field("add","release_time")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["release_time"],expression:"form['release_time']"}],attrs:{type:"date",disabled:e.disabledObj["release_time_isDisabled"],id:"form_release_time",placeholder:"请输入发行时间"},domProps:{value:e.form["release_time"]},on:{input:function(s){s.target.composing||e.$set(e.form,"release_time",s.target.value)}}}):e.$check_field("get","release_time")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","album_name")||e.$check_field("add","album_name")||e.$check_field("get","album_name")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(4),s("div",{staticClass:"diy_field diy_text"},[e.form["album_name"]&&e.$check_field("set","album_name")||!e.form["album_name"]&&e.$check_field("add","album_name")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["album_name"],expression:"form['album_name']"}],attrs:{type:"text",id:"form_album_name",placeholder:"请输入专辑名称",disabled:e.disabledObj["album_name_isDisabled"]},domProps:{value:e.form["album_name"]},on:{input:function(s){s.target.composing||e.$set(e.form,"album_name",s.target.value)}}}):e.$check_field("get","album_name")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","regular_users")||e.$check_field("add","regular_users")||e.$check_field("get","regular_users")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(5),s("div",{staticClass:"diy_field diy_down"},[e.form["regular_users"]&&e.$check_field("set","regular_users")||!e.form["regular_users"]&&e.$check_field("add","regular_users")?s("select",{directives:[{name:"model",rawName:"v-model",value:e.form["regular_users"],expression:"form['regular_users']"}],attrs:{id:"form_regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var s="_value"in e?e._value:e.value;return s}));e.$set(e.form,"regular_users",s.target.multiple?i:i[0])}}},e._l(e.list_user_regular_users,(function(i){return s("option",{domProps:{value:i["user_id"]}},[e._v(" "+e._s(i["nickname"]+"-"+i["username"])+" ")])})),0):e.$check_field("get","regular_users")?s("span",[e._v(e._s(e.form["regular_users"]))]):e._e()])]):e._e(),e.$check_field("set","user_name")||e.$check_field("add","user_name")||e.$check_field("get","user_name")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(6),s("div",{staticClass:"diy_field diy_text"},[e.form["user_name"]&&e.$check_field("set","user_name")||!e.form["user_name"]&&e.$check_field("add","user_name")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["user_name"],expression:"form['user_name']"}],attrs:{type:"text",id:"form_user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},domProps:{value:e.form["user_name"]},on:{input:function(s){s.target.composing||e.$set(e.form,"user_name",s.target.value)}}}):e.$check_field("get","user_name")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","scoring_score")||e.$check_field("add","scoring_score")||e.$check_field("get","scoring_score")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(7),s("div",{staticClass:"diy_field diy_text"},[e.form["scoring_score"]&&e.$check_field("set","scoring_score")||!e.form["scoring_score"]&&e.$check_field("add","scoring_score")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.form["scoring_score"],expression:"form['scoring_score']"}],attrs:{type:"text",id:"form_scoring_score",placeholder:"请输入打分分数",disabled:e.disabledObj["scoring_score_isDisabled"]},domProps:{value:e.form["scoring_score"]},on:{input:function(s){s.target.composing||e.$set(e.form,"scoring_score",s.target.value)}}}):e.$check_field("get","scoring_score")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","evaluation_content")||e.$check_field("add","evaluation_content")||e.$check_field("get","evaluation_content")?s("div",{staticClass:"form-item col-12 col-md-6"},[e._m(8),s("div",{staticClass:"diy_field diy_desc"},[e.form["evaluation_content"]&&e.$check_field("set","evaluation_content")||!e.form["evaluation_content"]&&e.$check_field("add","evaluation_content")?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form["evaluation_content"],expression:"form['evaluation_content']"}],attrs:{id:"form_evaluation_content",disabled:e.disabledObj["evaluation_content_isDisabled"]},domProps:{value:e.form["evaluation_content"]},on:{input:function(s){s.target.composing||e.$set(e.form,"evaluation_content",s.target.value)}}}):e.$check_field("get","evaluation_content")?s("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e()]),s("div",{staticClass:"diy_edit_submit_box row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"btn_box"},[s("button",{staticClass:"btn_submit",on:{click:function(s){return e.submit()}}},[e._v("提交")])])])])])])])},r=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 歌曲名称: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 音乐类型: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 歌手姓名: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 发行时间: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 专辑名称: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 普通用户: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 用户姓名: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 打分分数: ")])])},function(){var e=this,s=e._self._c;return s("div",{staticClass:"diy_title"},[s("span",[e._v(" 评价内容: ")])])}],a=i("c6e7"),_={mixins:[a["a"]],components:{},data(){return{url_get_obj:"~/api/music_evaluation/get_obj?",url_add:"~/api/music_evaluation/add?",url_set:"~/api/music_evaluation/set?",oauth:{signIn:!0,user_group:[]},query:{song_title:"",music_genre:"",singer_name:"",release_time:"",album_name:"",regular_users:0,user_name:"",scoring_score:"",evaluation_content:"",music_evaluation_id:0},obj:{song_title:"",music_genre:"",singer_name:"",release_time:(new Date).getTime(),album_name:"",regular_users:0,user_name:"",scoring_score:"",evaluation_content:"",music_evaluation_id:0},form:{song_title:"",music_genre:"",singer_name:"",release_time:(new Date).getTime(),album_name:"",regular_users:0,user_name:"",scoring_score:"",evaluation_content:"",music_evaluation_id:0},disabledObj:{song_title_isDisabled:!1,music_genre_isDisabled:!1,singer_name_isDisabled:!1,release_time_isDisabled:!1,album_name_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,scoring_score_isDisabled:!1,evaluation_content_isDisabled:!1},list_user_regular_users:[],field:"music_evaluation_id"}},methods:{submit_check(e){return e.release_time?null:"发行时间不能为空"},async get_list_user_regular_users(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_regular_users=e.result.list:e.error&&console.error(e.error)},async get_user_session_regular_users(){var e=this,s=await this.$get("~/api/user_group/get_obj?name=普通用户");if(s.result&&s.result.obj){var i=s.result.obj.source_table,t=e.$store.state.user.user_id;if(t){var r="~/api/"+i+"/get_obj?";this.$get(r,{user_id:e.$store.state.user.user_id},(function(s){if(s.result&&s.result.obj){var i=[];for(let e in s.result.obj)i.push(e);var r=[];for(let s in e.form)r.push(s);e.form["regular_users"]=t,e.disabledObj["regular_users_isDisabled"]=!0;for(var a=0;a<i.length;a++)if("examine_state"!==i[a]&&"examine_reply"!==i[a])for(var _=0;_<r.length;_++)if(i[a]===r[_]&&"regular_users"!==i[a]){e.form[r[_]]=s.result.obj[i[a]],e.disabledObj[r[_]+"_isDisabled"]=!0;break}}}))}}else s.error&&console.error(s.error)},change_file(e,s){var i=new FormData;i.append("file",e[0]),this.$post("~/api/music_evaluation/upload?",i,e=>{e.result?this.form[s]=e.result.url:e.error&&this.$toast(e.error.message)})},get_obj_before(e){var s=$.db.get("form");if(s){var i=[];for(let e in s)i.push(e);var t=[];for(let e in this.form)t.push(e);for(var r=0;r<i.length;r++)if("examine_state"!==i[r]&&"examine_reply"!==i[r])for(var a=0;a<t.length;a++)if(t[a]===i[r]){this.form[t[a]]=s[i[r]],this.obj[t[a]]=s[i[r]],this.disabledObj[t[a]+"_isDisabled"]=!0;break}}return this.form["release_time"]&&-1===JSON.stringify(this.form["release_time"]).indexOf("-")&&(this.form["release_time"]=this.$toTime(parseInt(this.form["release_time"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after(e,s){s&&s(e)}},created(){this.get_user_session_regular_users(),this.get_list_user_regular_users()}},l=_,o=i("0b56"),n=Object(o["a"])(l,t,r,!1,null,null,null);s["default"]=n.exports}}]);