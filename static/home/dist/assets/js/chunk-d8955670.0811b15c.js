(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8955670"],{"0bfb":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"page_user",attrs:{id:"user_address"}},[s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-between"},[s("div",{staticClass:"col-12 col-md-3"},[s("div",{staticClass:"card_menu"},[s("list_admin_menu_user")],1)]),s("div",{staticClass:"col-12 col-md-9"},[s("div",{staticClass:"card_addres pl-2"},[e._m(0),e.$check_action("/music_evaluation/view","get")?s("view_music_evaluation"):e._e()],1)])])])])])},i=[function(){var e=this,s=e._self._c;return s("div",[s("span",[e._v("音乐评价")])])}],r=t("bc88"),l=function(){var e=this,s=e._self._c;return s("el-main",{staticClass:"bg edit_wrap"},[e.is_view()?s("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[s("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","song_title")||e.$check_field("add","song_title")||e.$check_field("set","song_title")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"歌曲名称",prop:"song_title"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","song_title")||!e.form["music_evaluation_id"]&&e.$check_field("add","song_title")?s("el-input",{attrs:{id:"song_title",placeholder:"请输入歌曲名称",disabled:e.disabledObj["song_title_isDisabled"]},model:{value:e.form["song_title"],callback:function(s){e.$set(e.form,"song_title",s)},expression:"form['song_title']"}}):e.$check_field("get","song_title")?s("div",[e._v(e._s(e.form["song_title"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","music_genre")||e.$check_field("add","music_genre")||e.$check_field("set","music_genre")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"音乐类型",prop:"music_genre"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","music_genre")||!e.form["music_evaluation_id"]&&e.$check_field("add","music_genre")?s("el-input",{attrs:{id:"music_genre",placeholder:"请输入音乐类型",disabled:e.disabledObj["music_genre_isDisabled"]},model:{value:e.form["music_genre"],callback:function(s){e.$set(e.form,"music_genre",s)},expression:"form['music_genre']"}}):e.$check_field("get","music_genre")?s("div",[e._v(e._s(e.form["music_genre"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","singer_name")||e.$check_field("add","singer_name")||e.$check_field("set","singer_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"歌手姓名",prop:"singer_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","singer_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","singer_name")?s("el-input",{attrs:{id:"singer_name",placeholder:"请输入歌手姓名",disabled:e.disabledObj["singer_name_isDisabled"]},model:{value:e.form["singer_name"],callback:function(s){e.$set(e.form,"singer_name",s)},expression:"form['singer_name']"}}):e.$check_field("get","singer_name")?s("div",[e._v(e._s(e.form["singer_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","release_time")||e.$check_field("add","release_time")||e.$check_field("set","release_time")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"发行时间",prop:"release_time"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","release_time")||!e.form["music_evaluation_id"]&&e.$check_field("add","release_time")?s("el-date-picker",{attrs:{disabled:e.disabledObj["release_time_isDisabled"],id:"release_time",type:"date",placeholder:"选择日期"},model:{value:e.form["release_time"],callback:function(s){e.$set(e.form,"release_time",s)},expression:"form['release_time']"}}):e.$check_field("get","release_time")?s("div",[e._v(e._s(e.form["release_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","album_name")||e.$check_field("add","album_name")||e.$check_field("set","album_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"专辑名称",prop:"album_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","album_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","album_name")?s("el-input",{attrs:{id:"album_name",placeholder:"请输入专辑名称",disabled:e.disabledObj["album_name_isDisabled"]},model:{value:e.form["album_name"],callback:function(s){e.$set(e.form,"album_name",s)},expression:"form['album_name']"}}):e.$check_field("get","album_name")?s("div",[e._v(e._s(e.form["album_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"!==e.user_group?s("div",[e._v(" "+e._s(e.get_user_session_regular_users(e.form["regular_users"]))+" "),"管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","regular_users")||!e.form["music_evaluation_id"]&&e.$check_field("add","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","user_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","user_name")?s("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(s){e.$set(e.form,"user_name",s)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?s("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","scoring_score")||e.$check_field("add","scoring_score")||e.$check_field("set","scoring_score")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"打分分数",prop:"scoring_score"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","scoring_score")||!e.form["music_evaluation_id"]&&e.$check_field("add","scoring_score")?s("el-input",{attrs:{id:"scoring_score",placeholder:"请输入打分分数",disabled:e.disabledObj["scoring_score_isDisabled"]},model:{value:e.form["scoring_score"],callback:function(s){e.$set(e.form,"scoring_score",s)},expression:"form['scoring_score']"}}):e.$check_field("get","scoring_score")?s("div",[e._v(e._s(e.form["scoring_score"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","evaluation_content")||e.$check_field("add","evaluation_content")||e.$check_field("set","evaluation_content")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"评价内容",prop:"evaluation_content"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","evaluation_content")||!e.form["music_evaluation_id"]&&e.$check_field("add","evaluation_content")?s("el-input",{attrs:{type:"textarea",id:"evaluation_content",placeholder:"请输入评价内容",disabled:e.disabledObj["evaluation_content_isDisabled"]},model:{value:e.form["evaluation_content"],callback:function(s){e.$set(e.form,"evaluation_content",s)},expression:"form['evaluation_content']"}}):e.$check_field("get","evaluation_content")?s("div",[e._v(e._s(e.form["evaluation_content"]))]):e._e()],1)],1):e._e()],1),s("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/music_evaluation/view","set")||e.$check_action("/music_evaluation/view","add")||e.$check_option("/music_evaluation/table","examine")?s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submit()}}},[e._v("提交")]),s("el-button",{on:{click:function(s){return e.cancel()}}},[e._v("取消")])],1):s("el-form-item",[s("el-button",{on:{click:function(s){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},_=[],o=t("c6e7"),c={mixins:[o["a"]],data(){return{field:"music_evaluation_id",url_add:"~/api/music_evaluation/add?",url_set:"~/api/music_evaluation/set?",url_get_obj:"~/api/music_evaluation/get_obj?",url_upload:"~/api/music_evaluation/upload?",query:{music_evaluation_id:0},form:{song_title:"",music_genre:"",singer_name:"",release_time:"",album_name:"",regular_users:0,user_name:"",scoring_score:"",evaluation_content:"",music_evaluation_id:0},disabledObj:{song_title_isDisabled:!1,music_genre_isDisabled:!1,singer_name_isDisabled:!1,release_time_isDisabled:!1,album_name_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,scoring_score_isDisabled:!1,evaluation_content_isDisabled:!1},list_user_regular_users:[],group_user_regular_users:""}},methods:{async get_list_user_regular_users(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_regular_users=e.result.list:e.error&&console.error(e.error)},async get_group_user_regular_users(){this.form["regular_users"]=this.$store.state.user.user_id;var e=await this.$get("~/api/user_group/get_obj?name=普通用户");e.result&&e.result.obj?this.group_user_regular_users=e.result.obj:e.error&&console.error(e.error)},get_user_session_regular_users(e){var s=this,t={user_id:e},a="~/api/"+s.group_user_regular_users.source_table+"/get_obj?";this.$get(a,t,(function(t){if(t.result&&t.result.obj){var a=[];for(let e in t.result.obj)a.push(e);var i=[];for(let e in s.form)i.push(e);s.form["regular_users"]=e,s.disabledObj["regular_users_isDisabled"]=!0;for(var r=0;r<a.length;r++)if("examine_state"!==a[r]&&"examine_reply"!==a[r])for(var l=0;l<i.length;l++)if(a[r]===i[l]){if("regular_users"!==a[r]){s.form[i[l]]=t.result.obj[a[r]],s.disabledObj[i[l]+"_isDisabled"]=!0;break}s.disabledObj[i[l]+"_isDisabled"]=!0}}}))},get_user_regular_users(e){var s=this.list_user_regular_users.getObj({user_id:e}),t="";return s&&(t=s.nickname?s.nickname:s.username),t},get_obj_before(e){var s="";return s=$.db.get("form"),$.push(this.form,s),this.form&&s&&Object.keys(this.form).forEach(e=>{Object.keys(s).forEach(s=>{e===s&&(this.disabledObj[e+"_isDisabled"]=!0)})}),this.form["release_time"]&&-1===this.form["release_time"].indexOf("-")&&(this.form["release_time"]=this.$toTime(parseInt(this.form["release_time"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after(e,s){"0000-00-00"==e.result.obj["release_time"]&&(e.result.obj["release_time"]=null),parseInt(e.result.obj["release_time"])>9999&&(e.result.obj["release_time"]=this.$toTime(parseInt(e.result.obj["release_time"]),"yyyy-MM-dd"))},submit_check(e){return e.release_time?null:"发行时间不能为空"},is_view(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/music_evaluation/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/music_evaluation/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/music_evaluation/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/music_evaluation/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/music_evaluation/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg(e){this.uploadFile(e.file,"avatar")}},created(){this.get_list_user_regular_users(),this.get_group_user_regular_users()}},u=c,n=(t("f6ef"),t("0b56")),m=Object(n["a"])(u,l,_,!1,null,null,null),d=m.exports,f={data(){return{}},mounted(){},methods:{},components:{list_admin_menu_user:r["a"],view_music_evaluation:d}},g=f,b=(t("94f5"),Object(n["a"])(g,a,i,!1,null,"25dcc579",null));s["default"]=b.exports},"4ae9":function(e,s,t){},"7dfd":function(e,s,t){},"94f5":function(e,s,t){"use strict";t("7dfd")},abbe:function(e,s,t){"use strict";t("bcc4")},bc88:function(e,s,t){"use strict";var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"list_menu diy_menu"},[s("router-link",{staticClass:"menu_item",class:{selected:"/user_center/index"===this.$route.path},attrs:{to:"/user_center/index"}},[s("span",{staticClass:"left_span"},[e._v("个人首页")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]),"管理员"==e.user_group||e.$check_action("/regular_users/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/regular_users/table"===this.$route.path},attrs:{to:"/regular_users/table"}},[s("span",{staticClass:"left_span"},[e._v("普通用户")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/music_classification/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/music_classification/table"===this.$route.path},attrs:{to:"/music_classification/table"}},[s("span",{staticClass:"left_span"},[e._v("音乐分类")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/popular_songs/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/popular_songs/table"===this.$route.path},attrs:{to:"/popular_songs/table"}},[s("span",{staticClass:"left_span"},[e._v("热门歌曲")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/music_evaluation/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/music_evaluation/table"===this.$route.path},attrs:{to:"/music_evaluation/table"}},[s("span",{staticClass:"left_span"},[e._v("音乐评价")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/music_information/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/music_information/table"===this.$route.path},attrs:{to:"/music_information/table"}},[s("span",{staticClass:"left_span"},[e._v("音乐信息")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/music_data/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/music_data/table"===this.$route.path},attrs:{to:"/music_data/table"}},[s("span",{staticClass:"left_span"},[e._v("音乐数据")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/song_information/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/song_information/table"===this.$route.path},attrs:{to:"/song_information/table"}},[s("span",{staticClass:"left_span"},[e._v("歌曲信息")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/forum/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/forum/table"===this.$route.path},attrs:{to:"/forum/table"}},[s("span",{staticClass:"left_span"},[e._v(e._s(e.$page_title("/forum/table")||"论坛"))]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/message/table","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/message/table"===this.$route.path},attrs:{to:"/message/table"}},[s("span",{staticClass:"left_span"},[e._v("留言板")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e(),"管理员"==e.user_group||e.$check_action("/collect/list","get")?s("router-link",{staticClass:"menu_item",class:{selected:"/collect/list"===this.$route.path},attrs:{to:"/user/collect"}},[s("span",{staticClass:"left_span"},[e._v("收藏")]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:"house-fill"}})],1)]):e._e()],1)},i=[],r=t("c6e7"),l={mixins:[r["a"]],data(){return{}},mounted(){},methods:{},components:{}},_=l,o=(t("abbe"),t("0b56")),c=Object(o["a"])(_,a,i,!1,null,"076bfabc",null);s["a"]=c.exports},bcc4:function(e,s,t){},f6ef:function(e,s,t){"use strict";t("4ae9")}}]);