(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bfae830"],{1922:function(t,e,a){},afa9:function(t,e,a){"use strict";a("1922")},f365:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",{staticClass:"bg edit_wrap comtable_e"},[t.is_view()?a("el-form",{ref:"form",attrs:{model:t.form,"status-icon":"","label-width":"120px"}},[a("el-row",{staticClass:"row_ce"},[a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"封面图",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img,"show-file-list":!1}},[t.form.cart_img?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"主图_1",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img_1,"show-file-list":!1}},[t.form.cart_img_1?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img_1)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"主图_2",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img_2,"show-file-list":!1}},[t.form.cart_img_2?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img_2)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"主图_3",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img_3,"show-file-list":!1}},[t.form.cart_img_3?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img_3)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"主图_4",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img_4,"show-file-list":!1}},[t.form.cart_img_4?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img_4)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"主图_5",prop:"cart_avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":t.upload_cart_img_5,"show-file-list":!1}},[t.form.cart_img_5?a("img",{staticClass:"avatar",attrs:{src:t.$fullUrl(t.form.cart_img_5)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:12}},[a("el-form-item",{attrs:{label:"标题",prop:"cart_title"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.cart_title,callback:function(e){t.$set(t.form,"cart_title",e)},expression:"form.cart_title"}})],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:12}},[a("el-form-item",{attrs:{label:"描述",prop:"cart_description"}},[a("el-input",{attrs:{placeholder:"请输入描述"},model:{value:t.form.cart_description,callback:function(e){t.$set(t.form,"cart_description",e)},expression:"form.cart_description"}})],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"原价",prop:"cart_price_ago"}},[a("el-input-number",{model:{value:t.form.cart_price_ago,callback:function(e){t.$set(t.form,"cart_price_ago",e)},expression:"form.cart_price_ago"}})],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"卖价",prop:"cart_price"}},[a("el-input-number",{model:{value:t.form.cart_price,callback:function(e){t.$set(t.form,"cart_price",e)},expression:"form.cart_price"}})],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"库存",prop:"cart_inventory"}},[a("el-input-number",{attrs:{placeholder:"请输入库存"},model:{value:t.form.cart_inventory,callback:function(e){t.$set(t.form,"cart_inventory",e)},expression:"form.cart_inventory"}})],1)],1),a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"分类",prop:"cart_type"}},[a("el-select",{model:{value:t.form.cart_type,callback:function(e){t.$set(t.form,"cart_type",e)},expression:"form.cart_type"}},t._l(t.list_cart_goods_type,(function(t,e){return a("el-option",{key:e,attrs:{value:t.name,label:t.name}})})),1)],1)],1),"管理员"===t.user_group||t.$check_field("get","brand")||t.$check_field("add","brand")||t.$check_field("set","brand")?a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"品牌",prop:"brand"}},["管理员"===t.user_group||t.form["mall_center_id"]&&t.$check_field("set","brand")||!t.form["mall_center_id"]&&t.$check_field("add","brand")?a("el-input",{attrs:{id:"brand",placeholder:"请输入品牌",disabled:t.disabledObj["brand_isDisabled"]},model:{value:t.form["brand"],callback:function(e){t.$set(t.form,"brand",e)},expression:"form['brand']"}}):t.$check_field("get","brand")?a("div",[t._v(t._s(t.form["brand"]))]):t._e()],1)],1):t._e(),"管理员"===t.user_group||t.$check_field("get","specifications")||t.$check_field("add","specifications")||t.$check_field("set","specifications")?a("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",{attrs:{label:"规格",prop:"specifications"}},["管理员"===t.user_group||t.form["mall_center_id"]&&t.$check_field("set","specifications")||!t.form["mall_center_id"]&&t.$check_field("add","specifications")?a("el-input",{attrs:{id:"specifications",placeholder:"请输入规格",disabled:t.disabledObj["specifications_isDisabled"]},model:{value:t.form["specifications"],callback:function(e){t.$set(t.form,"specifications",e)},expression:"form['specifications']"}}):t.$check_field("get","specifications")?a("div",[t._v(t._s(t.form["specifications"]))]):t._e()],1)],1):t._e(),a("el-col",{staticClass:"el_form_editor_warp",attrs:{xs:24,sm:24,lg:24}},[a("el-form-item",{attrs:{label:"正文",prop:"cart_content"}},[a("quill-editor",{model:{value:t.form.cart_content,callback:function(e){t.$set(t.form,"cart_content",e)},expression:"form.cart_content"}})],1)],1)],1),a("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1)],1):t._e()],1)},i=[],s=(a("b64b"),a("159b"),a("96cf"),a("1da1")),o=a("c6e7"),l={mixins:[o["a"]],data:function(){return{field:"mall_center_id",url_add:"~/api/mall_center/add?",url_set:"~/api/mall_center/set?",url_get_obj:"~/api/mall_center/get_obj?",url_upload:"~/api/mall_center/upload?",query:{mall_center_id:0},form:{brand:"",specifications:"",cart_title:"",cart_img:"",cart_description:"",cart_price_ago:0,cart_price:0,cart_inventory:0,cart_type:"",cart_content:"",cart_img_1:"",cart_img_2:"",cart_img_3:"",cart_img_4:"",cart_img_5:"",mall_center_id:0},disabledObj:{brand_isDisabled:!1,specifications_isDisabled:!1},list_cart_goods_type:[],goods_form:{goods_id:0,title:"",img:"",description:"",price_ago:0,price:0,inventory:0,type:"",content:"",img_1:"",img_2:"",img_3:"",img_4:"",img_5:"",source_table:"",source_field:"",source_id:0,user_id:this.$store.state.user.user_id}}},methods:{get_obj_before:function(t){var e=this,a="";return this.form&&a&&Object.keys(this.form).forEach((function(t){Object.keys(a).forEach((function(a){t===a&&(e.disabledObj[t+"_isDisabled"]=!0)}))})),$.db.del("form"),t},get_obj_after:function(t,e){},submit_check:function(t){var e=null;return e},is_view:function(){var t="管理员"==this.user_group;return t||(t=this.$check_action("/mall_center/table","add"),console.log(t?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),t||(t=this.$check_action("/mall_center/table","set"),console.log(t?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),t||(t=this.$check_action("/mall_center/view","add"),console.log(t?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),t||(t=this.$check_action("/mall_center/view","set"),console.log(t?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),t||(t=this.$check_action("/mall_center/view","get"),console.log(t?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(t?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),t},get_cart_goods_type:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("~/api/goods_type/get_list?");case 2:a=e.sent,t.list_cart_goods_type=a.result.list;case 4:case"end":return e.stop()}}),e)})))()},upload_cart_img:function(t){this.uploadFile(t.file,"cart_img")},upload_cart_img_1:function(t){this.uploadFile(t.file,"cart_img_1")},upload_cart_img_2:function(t){this.uploadFile(t.file,"cart_img_2")},upload_cart_img_3:function(t){this.uploadFile(t.file,"cart_img_3")},upload_cart_img_4:function(t){this.uploadFile(t.file,"cart_img_4")},upload_cart_img_5:function(t){this.uploadFile(t.file,"cart_img_5")},submit_after:function(){var t=this;if(console.log(this.form[this.field]),this.form[this.field])this.submit_goods(this.form[this.field],"set");else{var e={cart_title:this.form.cart_title,cart_description:this.form.cart_description};this.$get("~/api/mall_center/get_obj?",e,(function(e){console.log("商品息res",e),e.result&&e.result.obj?t.submit_goods(e.result.obj[t.field],"add"):e.error&&(console.error(e.error),t.$toast(e.error.message,"error"))}))}},submit_goods:function(t,e){var a=this,r=[];r.push({field_name:"品牌",field_value:this.form.brand}),r.push({field_name:"规格",field_value:this.form.specifications}),this.goods_form={goods_id:0,title:this.form.cart_title,img:this.form.cart_img,description:this.form.cart_description,price_ago:this.form.cart_price_ago,price:this.form.cart_price,inventory:this.form.cart_inventory,type:this.form.cart_type,content:this.form.cart_content,img_1:this.form.cart_img_1,img_2:this.form.cart_img_2,img_3:this.form.cart_img_3,img_4:this.form.cart_img_4,img_5:this.form.cart_img_5,source_table:"mall_center",source_field:this.field,source_id:t,customize_field:JSON.stringify(r),user_id:this.$store.state.user.user_id},"set"===e?(delete this.goods_form.goods_id,delete this.goods_form.user_id,this.$post("~/api/goods/set?source_table=mall_center&source_field="+this.field+"&source_id="+t,this.goods_form,(function(t){console.log("提交结果：",t),t.result?(a.$toast("修改成功!","success"),a.$router.go(-2)):t.error&&(console.error(t.error),a.$toast(t.error.message,"error"))}))):this.$post("~/api/goods/add?",this.goods_form,(function(t){console.log("提交结果：",t),t.result?(a.$toast("添加成功!","success"),a.$router.go(-2)):t.error&&(console.error(t.error),a.$toast(t.error.message,"error"))}))},uploadimg:function(t){this.uploadFile(t.file,"avatar")}},created:function(){this.get_cart_goods_type()}},c=l,_=(a("afa9"),a("2877")),m=Object(_["a"])(c,r,i,!1,null,null,null);e["default"]=m.exports}}]);