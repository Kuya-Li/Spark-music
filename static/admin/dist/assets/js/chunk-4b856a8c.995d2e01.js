(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b856a8c"],{"0bfb":function(e,s,r){"use strict";r.r(s);var i=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?r("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[r("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","song_title")||e.$check_field("add","song_title")||e.$check_field("set","song_title")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"歌曲名称",prop:"song_title"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","song_title")||!e.form["music_evaluation_id"]&&e.$check_field("add","song_title")?r("el-input",{attrs:{id:"song_title",placeholder:"请输入歌曲名称",disabled:e.disabledObj["song_title_isDisabled"]},model:{value:e.form["song_title"],callback:function(s){e.$set(e.form,"song_title",s)},expression:"form['song_title']"}}):e.$check_field("get","song_title")?r("div",[e._v(e._s(e.form["song_title"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","music_genre")||e.$check_field("add","music_genre")||e.$check_field("set","music_genre")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"音乐类型",prop:"music_genre"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","music_genre")||!e.form["music_evaluation_id"]&&e.$check_field("add","music_genre")?r("el-input",{attrs:{id:"music_genre",placeholder:"请输入音乐类型",disabled:e.disabledObj["music_genre_isDisabled"]},model:{value:e.form["music_genre"],callback:function(s){e.$set(e.form,"music_genre",s)},expression:"form['music_genre']"}}):e.$check_field("get","music_genre")?r("div",[e._v(e._s(e.form["music_genre"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","singer_name")||e.$check_field("add","singer_name")||e.$check_field("set","singer_name")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"歌手姓名",prop:"singer_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","singer_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","singer_name")?r("el-input",{attrs:{id:"singer_name",placeholder:"请输入歌手姓名",disabled:e.disabledObj["singer_name_isDisabled"]},model:{value:e.form["singer_name"],callback:function(s){e.$set(e.form,"singer_name",s)},expression:"form['singer_name']"}}):e.$check_field("get","singer_name")?r("div",[e._v(e._s(e.form["singer_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","release_time")||e.$check_field("add","release_time")||e.$check_field("set","release_time")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"发行时间",prop:"release_time"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","release_time")||!e.form["music_evaluation_id"]&&e.$check_field("add","release_time")?r("el-date-picker",{attrs:{disabled:e.disabledObj["release_time_isDisabled"],id:"release_time",type:"date",placeholder:"选择日期"},model:{value:e.form["release_time"],callback:function(s){e.$set(e.form,"release_time",s)},expression:"form['release_time']"}}):e.$check_field("get","release_time")?r("div",[e._v(e._s(e.form["release_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","album_name")||e.$check_field("add","album_name")||e.$check_field("set","album_name")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"专辑名称",prop:"album_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","album_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","album_name")?r("el-input",{attrs:{id:"album_name",placeholder:"请输入专辑名称",disabled:e.disabledObj["album_name_isDisabled"]},model:{value:e.form["album_name"],callback:function(s){e.$set(e.form,"album_name",s)},expression:"form['album_name']"}}):e.$check_field("get","album_name")?r("div",[e._v(e._s(e.form["album_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"!==e.user_group?r("div",[e._v(" "+e._s(e.get_user_session_regular_users(e.form["regular_users"]))+" "),"管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","regular_users")||!e.form["music_evaluation_id"]&&e.$check_field("add","regular_users")?r("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return r("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?r("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return r("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):r("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(s){e.$set(e.form,"regular_users",s)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return r("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","user_name")||!e.form["music_evaluation_id"]&&e.$check_field("add","user_name")?r("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(s){e.$set(e.form,"user_name",s)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?r("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","scoring_score")||e.$check_field("add","scoring_score")||e.$check_field("set","scoring_score")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"打分分数",prop:"scoring_score"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","scoring_score")||!e.form["music_evaluation_id"]&&e.$check_field("add","scoring_score")?r("el-input",{attrs:{id:"scoring_score",placeholder:"请输入打分分数",disabled:e.disabledObj["scoring_score_isDisabled"]},model:{value:e.form["scoring_score"],callback:function(s){e.$set(e.form,"scoring_score",s)},expression:"form['scoring_score']"}}):e.$check_field("get","scoring_score")?r("div",[e._v(e._s(e.form["scoring_score"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","evaluation_content")||e.$check_field("add","evaluation_content")||e.$check_field("set","evaluation_content")?r("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[r("el-form-item",{attrs:{label:"评价内容",prop:"evaluation_content"}},["管理员"===e.user_group||e.form["music_evaluation_id"]&&e.$check_field("set","evaluation_content")||!e.form["music_evaluation_id"]&&e.$check_field("add","evaluation_content")?r("el-input",{attrs:{type:"textarea",id:"evaluation_content",placeholder:"请输入评价内容",disabled:e.disabledObj["evaluation_content_isDisabled"]},model:{value:e.form["evaluation_content"],callback:function(s){e.$set(e.form,"evaluation_content",s)},expression:"form['evaluation_content']"}}):e.$check_field("get","evaluation_content")?r("div",[e._v(e._s(e.form["evaluation_content"]))]):e._e()],1)],1):e._e()],1),r("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/music_evaluation/view","set")||e.$check_action("/music_evaluation/view","add")||e.$check_option("/music_evaluation/table","examine")?r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(s){return e.cancel()}}},[e._v("取消")])],1):r("el-form-item",[r("el-button",{on:{click:function(s){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},a=[],t=(r("b64b"),r("159b"),r("96cf"),r("1da1")),l=r("c6e7"),_={mixins:[l["a"]],data:function(){return{field:"music_evaluation_id",url_add:"~/api/music_evaluation/add?",url_set:"~/api/music_evaluation/set?",url_get_obj:"~/api/music_evaluation/get_obj?",url_upload:"~/api/music_evaluation/upload?",query:{music_evaluation_id:0},form:{song_title:"",music_genre:"",singer_name:"",release_time:"",album_name:"",regular_users:0,user_name:"",scoring_score:"",evaluation_content:"",music_evaluation_id:0},disabledObj:{song_title_isDisabled:!1,music_genre_isDisabled:!1,singer_name_isDisabled:!1,release_time_isDisabled:!1,album_name_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,scoring_score_isDisabled:!1,evaluation_content_isDisabled:!1},list_user_regular_users:[],group_user_regular_users:""}},methods:{get_list_user_regular_users:function(){var e=this;return Object(t["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:r=s.sent,r.result&&r.result.list?e.list_user_regular_users=r.result.list:r.error&&console.error(r.error);case 4:case"end":return s.stop()}}),s)})))()},get_group_user_regular_users:function(){var e=this;return Object(t["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.form["regular_users"]=e.user.user_id,s.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:r=s.sent,r.result&&r.result.obj?e.group_user_regular_users=r.result.obj:r.error&&console.error(r.error);case 5:case"end":return s.stop()}}),s)})))()},get_user_session_regular_users:function(e){var s=this,r={user_id:e},i="~/api/"+s.group_user_regular_users.source_table+"/get_obj?";this.$get(i,r,(function(r){if(r.result&&r.result.obj){var i=[];for(var a in r.result.obj)i.push(a);var t=[];for(var l in s.form)t.push(l);s.form["regular_users"]=e,s.disabledObj["regular_users_isDisabled"]=!0;for(var _=0;_<i.length;_++)if("examine_state"!==i[_]&&"examine_reply"!==i[_])for(var o=0;o<t.length;o++)if(i[_]===t[o]){if("regular_users"!==i[_]){s.form[t[o]]=r.result.obj[i[_]],s.disabledObj[t[o]+"_isDisabled"]=!0;break}s.disabledObj[t[o]+"_isDisabled"]=!0}}}))},get_user_regular_users:function(e){var s=this.list_user_regular_users.getObj({user_id:e}),r="";return s&&(r=s.nickname?s.nickname:s.username),r},get_obj_before:function(e){var s=this,r="";return r=$.db.get("form"),$.push(this.form,r),this.form&&r&&Object.keys(this.form).forEach((function(e){Object.keys(r).forEach((function(r){e===r&&(s.disabledObj[e+"_isDisabled"]=!0)}))})),this.form["release_time"]&&-1===this.form["release_time"].indexOf("-")&&(this.form["release_time"]=this.$toTime(parseInt(this.form["release_time"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after:function(e,s){"0000-00-00"==this.form["release_time"]&&(this.form["release_time"]=null),parseInt(this.form["release_time"])>9999&&(this.form["release_time"]=this.$toTime(parseInt(this.form["release_time"]),"yyyy-MM-dd"))},submit_check:function(e){return e.release_time?null:"发行时间不能为空"},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/music_evaluation/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/music_evaluation/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/music_evaluation/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/music_evaluation/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/music_evaluation/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_regular_users(),this.get_group_user_regular_users()}},o=_,u=(r("e2f9"),r("2877")),n=Object(u["a"])(o,i,a,!1,null,null,null);s["default"]=n.exports},c884:function(e,s,r){},e2f9:function(e,s,r){"use strict";r("c884")}}]);