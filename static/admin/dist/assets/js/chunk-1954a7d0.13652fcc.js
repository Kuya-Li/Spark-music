(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1954a7d0"],{1032:function(e,s,t){},"7bca":function(e,s,t){"use strict";t("1032")},dec0:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-main",{staticClass:"bg edit_wrap score_edit_wrap"},[t("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"70px"}},[t("el-row",{staticClass:"row_e"},[t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:24,lg:24}},[1===e.form.score_state?t("div",{staticClass:"title_margin",staticStyle:{"margin-bottom":"20px"}},[e._v("已评分，得分："),t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.form.score))])]):e._e()]),e._l(e.question_list,(function(s,r){return t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:24,lg:24}},["单选题"===s.type?t("div",{staticClass:"title_margin"},[e._v(" "+e._s(s.question_order+".单选题："+s.title+" ("+s.score+"分)")+" "),t("span",{staticClass:"score_show"},[e._v("--------"+e._s(e.answer_scores[r])+"分")])]):"多选题"===s.type?t("div",{staticClass:"title_margin"},[e._v(" "+e._s(s.question_order+".多选题："+s.title+" ("+s.score+"分)")+" "),t("span",{staticClass:"score_show"},[e._v("--------"+e._s(e.answer_scores[r])+"分")])]):"判断题"===s.type?t("div",{staticClass:"title_margin"},[e._v(" "+e._s(s.question_order+".判断题："+s.title+" ("+s.score+"分)")+" "),t("span",{staticClass:"score_show"},[e._v("--------"+e._s(e.answer_scores[r])+"分")])]):"填空题"===s.type?t("div",{staticClass:"title_margin"},[e._v(" "+e._s(s.question_order+".填空题："+s.title+" ("+s.score+"分)")+" "),e.if_scored?t("span",{staticClass:"score_show"},[e._v("--------"+e._s(e.answer_scores[r])+"分")]):t("span",{staticClass:"give_score"},[e._v("评分 "),t("el-input-number",{model:{value:e.answer_scores[r],callback:function(s){e.$set(e.answer_scores,r,s)},expression:"answer_scores[i]"}}),e._v(" 分 ")],1)]):t("div",{staticClass:"title_margin"},[e._v(" "+e._s(s.question_order+".主观题："+s.title+" ("+s.score+"分)")+" "),e.if_scored?t("span",{staticClass:"score_show"},[e._v("--------"+e._s(e.answer_scores[r])+"分")]):t("span",{staticClass:"give_score"},[e._v("评分 "),t("el-input-number",{model:{value:e.answer_scores[r],callback:function(s){e.$set(e.answer_scores,r,s)},expression:"answer_scores[i]"}}),e._v(" 分 ")],1)]),"单选题"===s.type?t("el-form-item",{attrs:{label:""}},[e._l(e.get_question_list(s.question_item),(function(s){return t("el-radio",{attrs:{disabled:!0,label:s},model:{value:e.answers[r],callback:function(s){e.$set(e.answers,r,s)},expression:"answers[i]"}},[e._v(e._s(s))])})),e.if_scored&&e.reference_answers[r]?t("div",[e._v(" 参考答案："+e._s(e.reference_answers[r])+" ")]):e._e()],2):"多选题"===s.type?t("el-form-item",{attrs:{label:""}},[t("el-checkbox-group",{attrs:{disabled:!0},model:{value:e.answers[r],callback:function(s){e.$set(e.answers,r,s)},expression:"answers[i]"}},e._l(e.get_question_list(s.question_item),(function(e){return t("el-checkbox",{attrs:{label:e}})})),1),e.if_scored&&e.reference_answers[r]?t("div",[e._v(" 参考答案："+e._s(e.reference_answers[r])+" ")]):e._e()],1):"判断题"===s.type?t("el-form-item",{attrs:{label:""}},[e._l(e.get_question_list(s.question_item),(function(s){return t("el-radio",{attrs:{disabled:!0,label:s},model:{value:e.answers[r],callback:function(s){e.$set(e.answers,r,s)},expression:"answers[i]"}},[e._v(e._s(s))])})),e.if_scored&&e.reference_answers[r]?t("div",[e._v(" 参考答案："+e._s(e.reference_answers[r])+" ")]):e._e()],2):"填空题"===s.type?t("el-form-item",{attrs:{label:""}},[t("el-input",{staticStyle:{width:"500px"},attrs:{disabled:!0},model:{value:e.answers[r],callback:function(s){e.$set(e.answers,r,s)},expression:"answers[i]"}}),e.if_scored?t("div",[e._v(" 参考答案："+e._s(e.reference_answers[r])+" ")]):e._e()],1):t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.answers[r],callback:function(s){e.$set(e.answers,r,s)},expression:"answers[i]"}}),e.if_scored?t("div",[e._v(" 参考答案："+e._s(e.reference_answers[r])+" ")]):e._e()],1)],1)})),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:24,lg:24}},[t("el-form-item",{attrs:{label:"提交人"}},[t("el-input",{attrs:{disabled:""},model:{value:this.form.nickname,callback:function(s){e.$set(this.form,"nickname",s)},expression:"this.form.nickname"}})],1)],1)],2),t("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:24,lg:24}},[t("el-form-item",[t("el-col",{staticClass:"el_form_btn el_form_btn_1",attrs:{xs:24,sm:24,lg:12}},[e.if_scored?e._e():t("el-button",{staticStyle:{width:"100%",float:"left"},attrs:{type:"primary"},on:{click:function(s){return e.submit()}}},[e._v("提交 ")])],1),t("el-col",{staticClass:"el_form_btn el_form_btn_2",attrs:{xs:24,sm:24,lg:12}},[t("el-button",{staticStyle:{width:"100%",float:"right"},on:{click:function(s){return e.cancel()}}},[e._v("取消")])],1)],1)],1)],1)],1)},a=[],i=(t("ac1f"),t("1276"),t("96cf"),t("1da1")),n=t("c6e7"),o={mixins:[n["a"]],data:function(){return{field:"user_answer_id",url_add:"~/api/subject_user_answer/add?",url_set:"~/api/subject_user_answer/set?",url_get_obj:"~/api/subject_user_answer/get_obj?",url_upload:"~/api/subject_user_answer/upload?",query:{user_answer_id:0},form:{user_answer_id:0,user_id:0,exam_id:0,score:0,score_state:0,answers:[],score_detail:[],objective_score:0,subjective_score:0,nickname:""},url_get_question_list:"~/api/subject_exam_question/get_list?",question_list:[],answers:[],if_scored:!1,answer_scores:[],reference_answers:[]}},methods:{get_obj_after:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var t,r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return 1===e.form.score_state&&(e.if_scored=!0),s.next=3,e.$get(e.url_get_question_list+"exam_id="+e.form.exam_id);case 3:if(t=s.sent,t.result)for(e.question_list=t.result.list,r=0;r<e.question_list.length;r++)"多选题"===e.question_list[r].type?e.answers[r]=[]:e.answers[r]="";else t.error&&console.error(t.error);for(e.form.answers=JSON.parse(e.form.answers),e.form.score_detail=JSON.parse(e.form.score_detail),a=0;a<e.form.answers.length;a++)e.answers[a]=e.form.answers[a].answer,e.answer_scores[a]=e.form.score_detail[a].score,"单选题"===e.question_list[a].type||"判断题"===e.question_list[a].type||"多选题"===e.question_list[a].type?e.answer_scores[a]!==e.question_list[a].score&&(e.reference_answers[a]=e.question_list[a].answer):e.reference_answers[a]=e.question_list[a].answer;case 8:case"end":return s.stop()}}),s)})))()},get_question_list:function(e){var s=e.split("\n");return s},submit_main:function(){var e=this;e.form.answers=JSON.stringify(e.form.answers);for(var s=0;s<e.answer_scores.length;s++)"填空题"!==this.question_list[s].type&&"主观题"!==this.question_list[s].type||(e.form.score_detail[s].score=this.answer_scores[s],e.form.subjective_score=parseFloat(e.form.subjective_score)+parseFloat(this.answer_scores[s]));e.form.score=parseFloat(e.form.subjective_score)+parseFloat(e.form.objective_score),e.form.score_state=1,e.form.score_detail=JSON.stringify(e.form.score_detail);var t=e.url_set+"user_answer_id="+e.query.user_answer_id;this.$post(t,e.form,(function(s,t){console.log("提交结果：",s),s.result?e.events("submit_after",s,null):s.error&&e.$toast(s.error.message,"danger")}))}},created:function(){}},_=o,l=(t("7bca"),t("2877")),c=Object(l["a"])(_,r,a,!1,null,null,null);s["default"]=c.exports}}]);